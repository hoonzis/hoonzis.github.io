---
layout: post
title: Options and Stocks charts in F# and JavaScript
date: '2016-04-16T05:25:00.000-08:00'
author: Jan Fajfr
tags:
- Maps
modified_time: '2016-04-16T05:11:43.965-08:00'
---
Recently I came across [Fable](http://fable.io/). Fable transpiles F# code into JavaScript, so you can run your F# in the browser. It will also generate map files, so that you can even debug F# in the browser and the generated JS is actually very readable so if something goes wrong you can still look to the "compiled" code. To sum it up, it's really a great project and I was amazed on how few modifications were necessary to my code to make it compile into JS. I am working on a small application to visualize some financial data and I figured out it would be great to use Fable for this. So I set myself to make Fable work with NVD3 and draw some interesting charts.

### Installing Fable
Fable is a compiler, so you might expect an executable. In this case it comes bundled as **npm** package, which you might want to install globally:

npm install -g fable-compiler

### Setup the Fable project
Before you get started with any code, you have to consider few things:

* Are you going to fit everything into single F# file or you will create a project? Fable allows you to do both and in the simpliest situation I will just point fable to a single file, but if you plan to build something bigger, you better create F# project (F# library will work, even though you won't distribute anything as library but compile into JS instead).

* How the resulting JavaScript should be structured and packaged? Two most common ways of defining modules in JavaScript are AMD and CommonJS.

* How is the resulting JS bundled. Fable will create one JavaScript file per F# file, these files have to be then loaded by the browser. Depending on the module pattern (CommonJS vs AMD) you will have to bundle them together to a single JavaScript file which will be included in the html.

I have chosen the following setup: F# project with multiple files. CommonJS as module system, bundled with Webpack. To go for this configuration, you will have to create the following 3 files in the root of the project folder:

**package.json**  - will define your JavaScript project (this is Node standard), list the necessary packages you depend on.

**fableconfig.json** - Fable's configuration - tell fable what are his dependencies

**webpack.config.json** - Webpack's config, tell him where the JS files are (generated by fable) and where to output the bundled result

### Creating the web page
The page itself will be very small - it contains only one div tag which we will use to draw the chart.


### Including D3 typings

### Writing typed definitions for NVD3

### Drawing the charts
