---
layout: post
title: GIT stops after unpacking objects or resolving deltas
date: '2012-10-23T15:32:00.003-07:00'
author: Jan Fajfr
tags:
- Source Control
modified_time: '2014-06-26T14:15:06.778-07:00'
blogger_id: tag:blogger.com,1999:blog-1710034134179566048.post-4011874078382089830
blogger_orig_url: http://hoonzis.blogspot.com/2012/10/git-stops-after-unpacking-objects-or.html
---

Clone, pull and push all seem to finish fine, but they always stop at "Resolving deltas" or "Unpacking objects". The root of this issue is the fact that MSGIT uses curl, which does not know how to talk to NTLM authenticated proxy. There are two solutions which worked for me, first one not being stable. <h3>Solution 1: unstable, easiest</h3>This *usually* works: <pre class="prettyprint"><br />git clone -v https://myrepo.git<br />Cloning into 'myrepo-1'...<br />Password for 'https://user@myrepo.com':<br />POST git-upload-pack (174 bytes)<br />remote: Counting objects: 2287, done.<br />remote: Compressing objects: 100% (1276/1276), done.<br />remote: Total 2287 (delta 1340), reused 1692 (delta 883)<br />Receiving objects: 100% (2287/2287), 53.37 MiB | 632 KiB/s, done.<br />Resolving deltas: 100% (1340/1340), done.<br /></pre>Or another when, when pulling from a repo: <pre class="prettyprint"><br />remote: Counting objects: 53, done.<br />remote: Compressing objects: 100% (28/28), done.<br />remote: Total 28 (delta 23), reused 2 (delta 0)<br />Unpacking objects: 100% (28/28), done.<br /></pre>The problem is that nothing is updated on the disk. I have tried using <strong>-v </strong>in order to obtain more information about what is going on, but I never get more than shown above. I am using Git over HTTPS with the HTTPS proxy well configured - so this should not be an issue.<br /><br />After un-finished clone, I have noticed, that the <strong>objects</strong> directory inside the <strong>.git</strong> directory actually changed it's size quite a lot. So it seems, that the objects are well received but never written to the actual branch. That might sound like a user-rights issue. But I am admin on the machine and I have access write rights on the folder. So for now, I don't know the cause of this problem. I have simple solution to overcome this issue. What I do to fix the repository is quite straightforward:<br /><br /><pre class="prettyprint"><br />$ git fsck<br />Checking object directories: 100% (256/256), done.<br />Checking objects: 100% (2187/2187), done.<br />dangling commit da575f887db63ccf97f37f9cf96316307398db82<br /></pre><strong>Git fsck</strong> always founds one dangling commit. It is a utility which checks the integrity of the object database. Here the dangling commit is a commit which is not used by any branch. To fix the issue I can just merge the commit with the current branch. <pre><br />$git merge da575f887db63ccf97f37f9cf96316307398db82<br /></pre>And everything works just fine... <h3>Solution 2: stable solution</h3>This needs sone more effort. The solution is to use the CNTLM as a proxy between the NTLM proxy and any application which needs to use it. <a href="http://sparethought.wordpress.com/2012/12/06/setting-git-to-work-behind-ntlm-authenticated-proxy-cntlm-to-the-rescue/">The solution is exelently described on this blog.</a><h3>Solution 3: not confirmed</h3>I was not able to confirm this one, but at <a href="http://stackoverflow.com/questions/13473341/git-clone-with-ntlm-proxy-hangs-after-resolving-deltas">this thread on StackOverflow</a> someone mentioned to use <b>verify-pack</b> function of git. Verify-pack verifies that <i>.pack</i> files, which are packed objects used by git during the transfer. If the files were transfered correctly you should be able to restore the commits contained inside the pack files. This actually did not work on my post, since the pack file was corrupted. 