---
layout: post
title: Installing Ruby & Rails & RVM on Windows 7
date: '2011-11-16T14:37:00.001-08:00'
author: Jan Fajfr
tags:
- Linux
- Rails on Ruby
modified_time: '2014-06-26T14:42:16.868-07:00'
blogger_id: tag:blogger.com,1999:blog-1710034134179566048.post-7700633139896977904
blogger_orig_url: http://hoonzis.blogspot.com/2011/11/installing-ruby-rails-rvm-on-windows-7.html
---

I write this post, just in case that someone will have the same issues as I had when installing Ruby & Rails (on Windows) and maybe it will save someones some hours.<br /><br />One limitation I had: I would use lots of versions of ruby, so I needed: RVM. (Ruby Version Manager) which is not available for windows.<br /><br />My config: Win 7 64 bit<br /><br />In this case, you have two options:<br /><ul><li>Use cygwin</li><li>Install on Virtual Machine</li></ul><br /><h3>Use Cygwin - did not work for me!</h3><ul><li>Install RVM.<br />I started with this option. To install RVM, there is some <a href="http://www.tiplite.com/how-to-install-rvm-on-windows-using-cygwin/">great help here</a></li><li>Install RubyGem. First <a href="http://rubygems.org/pages/download">download RubyGem</a>, than run <b>ruby setup.rb</b></li><li>Install rails by typing: <b>gem install rails</b>. And I just got the following errors:</li></ul><pre class="prettyprint"><br />Building native extensions.  This could take a while...<br />      0 [main] ruby 1192 C:\cygwin\bin\ruby.exe: *** fatal error - unable to rem<br />ap \\?\C:\cygwin\lib\ruby\1.8\i386-cygwin\etc.so to same address as parent: 0x1B<br />0000 != 0x210000<br />      Stack trace:<br />Frame     Function  Args<br />023F9BB8  6102796B  (023F9BB8, 00000000, 00000000, 00000000)<br />023F9EA8  6102796B  (6117EC60, 00008000, 00000000, 61180977)<br />023FAED8  61004F1B  (611A7FAC, 61243684, 001A0000, 00210000)<br />End of stack trace<br />      1 [main] ruby 3856 fork: child 1188 - died waiting for dll loading, errno<br />11<br />      0 [main] collect2 3220 fork: child -1 - died waiting for longjmp before in<br />itialization, retry 10, exit code 0xC0000135, errno 11<br />ERROR:  Error installing rails:<br />        ERROR: Failed to build gem native extension.<br /><br />        /usr/bin/ruby.exe extconf.rb<br />checking for re.h... yes<br />checking for ruby/st.h... no<br />creating Makefile<br /><br />make<br />gcc -I. -I/usr/lib/ruby/1.8/i386-cygwin -I/usr/lib/ruby/1.8/i386-cygwin -I. -DHA<br />VE_RE_H    -g -O3   -Wall  -c parser.c<br />gcc -shared -s -o parser.so parser.o -L. -L/usr/lib -L.  -Wl,--enable-auto-image<br />-base,--enable-auto-import,--export-all   -lruby  -ldl -lcrypt<br />collect2: fork: Resource temporarily unavailable<br />      0 [main] collect2 3220 fork: child -1 - died waiting for longjmp before in<br />itialization, retry 10, exit code 0xC0000135, errno 11<br />make: *** [parser.so] Error 1<br /></pre><b>And I never got over this issue. And I tried quite long enough. So if you are running the same config as I. Be aware you might end up like this... </b><br /><h3>Installing on Ubuntu 11 in VMWare</h3>This should be just a piece of cake I thought.<br /><ul><li>Ubuntu comes with Ruby already installed.</li><li>Install RVM: <b>sudo apt-get install ruby-rvm</b></li><li>Install RubyGems: <b>sudo apt-get install rubygems</b></li><li>Install Rails<b>sudo gem install rails</b></li><li>And Bundle: <b>sudo gem install bundle</b></li></ul>I needed some special libraries for our application, which had some prerequisites which I did not have:<br /><b>To install "nokogiri" I had to do:</b><br /><pre>sudo apt-get install libxslt-dev<br />sudo gem install nokogiri<br /></pre><br /><b>To install "rmagick":</b><br /><pre>sudo apt-get install libmagicwand-dev<br />sudo gem install rmagick<br /></pre><br />Now I did run "bundle" on the application, which actually did finish. But with some warnings, and the application did not run. So I started with cleaning up the warnings:<br /><br /><b>First warning:</b><br /><br /><pre>Invalid gemspec in [/var/lib/gems/1.8/specifications/capybara-1.1.1.gemspec]: invalid date format in specification: "2011-09-04 00:00:00.000000000Z"<br />Invalid gemspec in [/var/lib/gems/1.8/specifications/polyamorous-0.5.0.gemspec]: invalid date format in specification: "2011-09-03 00:00:00.000000000Z"<br /></pre><a href="http://stackoverflow.com/questions/5771758/invalid-gemspec-because-of-the-date-format-in-specification">Apparently quite common</a> and apparently for everyone there is different solution. For me what worked was:<br /><b><br /><pre>sudo gem install rubygems-update<br />sudo update_rubygems <br /></pre></b><br /><br /><b>Another strange warning which I was getting:</b><br /><pre>ERROR:  While executing gem ... (Gem::DocumentError)<br />    ERROR: RDoc documentation generator not installed: no such file to load -- json<br /></pre><br />Solved by:<br /><b><br /><pre>gem install rdoc-data<br />rdoc-data --install<br /></pre></b><br />After that I had to reinstall "bundle". And gem actually reinstalled all dependencies. But after that, it run!!<br /><br /><b>UPDATE:</b><br />Also I needed to access to my application from our network. VMWare has two options for setting up network: NAT and Bridged. Bridged interface did not work with Ubuntu 11 (don't know why).<br />So when you are in NAT mode and you need to access to your VM, you will need to configure port forwarding.<br /><a href="http://asunix.tufts.edu/howto/vmware/portforwardingWin7">Here is good way to set it up.</a><br /><br />I get that Ruby is not Windows friendly, but on Ubuntu it was not much better, until I solved those strange warnings, nothing worked correctly - and that was clean install, I mean a clean machine! With ruby pre-installed. I was just adding RubyGem and Rails...it took me a half a day...